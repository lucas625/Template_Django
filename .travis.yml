language: python
python:
  - "3.7"
install:
  - pip install pipenv
  - pipenv install --dev
before_script:
  - export SECRET_KEY='TEST'
  - export ALLOWED_HOSTS='[*]'
  - export DEBUG='False'
script:
  - pipenv run coverage run manage.py test --no-input --debug-mode -v 2
  - pipenv run coverage html -d public/coverage
  - pipenv run coverage xml
after_success:
  - bash <(wget -q -O - https://coverage.codacy.com/get.sh)
